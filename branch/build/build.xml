<project name="TimeTracker" default="deploy" basedir="..">
	<target name="init">
		<property name="dest.dir.dist" value="dist" />
		<property name="dest.dir.bin" value="bin" />
		<property name="dest.dir.lib" value="dist/lib" />
		<property name="src.dir.lib" value="lib" />
		<property name="src.dir.src" value="src" />
	</target>
	
	<target name="clean" depends="init">
		<delete dir="${dest.dir.dist}" />
		<delete dir="${dest.dir.bin}" />
	</target>
	
	<target name="prepare" depends="clean">
		<mkdir dir="${dest.dir.dist}" />
		<mkdir dir="${dest.dir.bin}" />
		<mkdir dir="${dest.dir.lib}" />
	</target>
	
	<path id="project.class.path">
		<pathelement location="lib/"/>
		<pathelement path="${java.class.path}/"/>
		<pathelement path="lib/log4j-1.2.16.jar"/>
	</path>
	
	<target name="compile" depends="prepare">
		<javac srcdir="${src.dir.src}" destdir="${dest.dir.bin}">
			<classpath refid="project.class.path" />
		</javac>
	</target>
	
	<target name="deploy" depends="compile">
		<jar destfile="${dest.dir.dist}/TimeTracker.jar" basedir="${dest.dir.bin}" manifest="${src.dir.src}/META-INF/MANIFEST.MF" />
	    <copy todir="${dest.dir.lib}">
	    	<fileset dir="${src.dir.lib}" includes="*.jar"/>
	    </copy>
	    <copy todir="${dest.dir.dist}">
	    	<fileset dir="${src.dir.src}" includes="*.properties, *.xml"/>
	    </copy>		
	</target>
</project>
